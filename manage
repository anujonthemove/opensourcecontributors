#!/usr/bin/env python
from flask.ext.script import Manager, Server, Shell
import app

def _make_context():
    return dict(
        app=app.app,
        mongo=app.mongo
    )

# class Server(Command):
#     """Runs a server in debug mode
#     """
#     def run(self):
#         app.run(host='0.0.0.0',debug=True)

manager = Manager(app.app)
manager.add_command('runserver', Server(host='0.0.0.0', use_debugger=True))
manager.add_command('shell', Shell(make_context=_make_context))

if __name__=='__main__':
    manager.run()
