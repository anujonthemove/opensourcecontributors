<!DOCTYPE html>
<html lang="en" ng-app="ghca">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="/favicon.ico">

    <title>GitHub Contributions Archive</title>

    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="/static/octicons/octicons.css" rel="stylesheet">
    <link href="/static/css/loader.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/angular.min.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/static/js/ie10-viewport-bug-workaround.js"></script>
    <script type="text/javascript" src="/static/js/moment.min.js"></script>
    <script type="text/javascript" src="/static/js/app.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- TODO  put this in its own place-->
    <style>
     body {
       margin-top:60px;
     }
     .query-container {
       padding:10px;
     }
    </style>
  </head>

  <body role="document" ng-controller="UserController as userCtrl">

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">GitHub Contributions Archive</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/">Home</a></li>
            <li><a href="http://hut8.io">Hut8.io</a></li>
            <li><a href="mailto:liambowen@gmail.com">Contact</a></li>
          </ul>
          <form name="userForm" class="navbar-form navbar-right" ng-submit="userCtrl.setUser()">
            <div class="form-group">
              <label for="query" class="sr-only">GitHub Username</label>
              <input type="text" ng-model="userCtrl.username"
                     class="form-control" id="query" placeholder="GitHub User">
            </div>
            <button id="submit-button" type="submit" class="btn btn-primary">Search</button>
          </form>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container" role="main">
      <div class="well">
        <div ng-hide="userCtrl.processed">
          <h3>Search for a user above to begin</h3>
          {{ userCtrl.username }}
        </div>
        <div ng-show="userCtrl.processed">
          <h4>
            <span class="mega-octicon octicon-person"></span>&nbsp;&nbsp;
            <a href="{{userCtrl.userUrl}}">
              <strong>{{userCtrl.processedUsername}}</strong>
            </a>
            made
            <strong>{{userCtrl.eventCount}}</strong> contributions
            to
            <strong>{{userCtrl.repos.length}}</strong> repositories
          </h4>
        </div>
      </div>

      <div id="results" ng-show="userCtrl.processed" class="row">
        <div class="col-md-12">
          <ul class="nav nav-pills">
            <li role="presentation" ng-class="{active: userCtrl.isCurrentTab(userCtrl.tabs.repoList)}">
              <a ng-click="userCtrl.setCurrentTab(userCtrl.tabs.repoList)" href>Repositories</a>
            </li>
            <li role="presentation" ng-class="{active: userCtrl.isCurrentTab(userCtrl.tabs.eventList)}">
              <a ng-click="userCtrl.setCurrentTab(userCtrl.tabs.eventList)" href>Events</a>
            </li>
          </ul>

          <div style="margin-top:.5em">
            <!-- Repositories -->
            <ul class="list-group" ng-show="userCtrl.isCurrentTab(userCtrl.tabs.repoList)">
              <li class="list-group-item" ng-repeat="repo in userCtrl.repos">
                <a href="https://github.com/{{repo}}">{{ repo }}</a>
              </li>
            </ul>

            <!-- Events result table -->
            <div ng-show="userCtrl.isCurrentTab(userCtrl.tabs.eventList)">

              <!-- TODO PAGINATION HERE -->
              <nav ng-show="userCtrl.multipleEventPages">
                <ul class="pagination">

                  <li ng-class="{disabled: userCtrl.currentEventPage === 1}">
                      <a href="#" aria-label="Previous" ng-click="userCtrl.previousEventsPage()">
                      <span aria-hidden="true">&laquo;</span>
                    </a>
                  </li>

                  <li ng-repeat="pageNum in userCtrl.range(userCtrl.eventPageCount)"
                      ng-class="{active: userCtrl.currentEventPage === pageNum}">
                    <a class="pagination-link" ng-click="userCtrl.setCurrentEventsPage(pageNum)" href>
                      {{ pageNum }}
                    </a>
                  </li>

                  <li ng-class="{disabled: userCtrl.currentEventPage === userCtrl.eventPageCount}">
                    <a href="#" aria-label="Next" ng-click="userCtrl.nextEventsPage()">
                      <span aria-hidden="true">&raquo;</span>
                    </a>
                  </li>

                </ul>
              </nav>

              <table class="table table-striped">
                <thead>
                  <th>
                    <!-- event type -->
                  </th>
                  <th>
                    <span class="octicon octicon-calendar"></span>
                  </th>
                  <th>
                    <span class="octicon octicon-repo"></span>
                  </th>
                  <th>
                    <span class="octicon octicon-person"></span>
                  </th>
                  <th>
                    <!-- description -->
                  </th>
                </thead>
                <tbody>

                  <tr ng-repeat="event in userCtrl.events">
                    <td>
                      <span title="" class="octicon octicon-person">
                      </span>
                    </td>
                    <td title="">
                      time
                    </td>
                    <td style="white-space:nowrap">
                      repo
                    </td>
                    <td>
                      <a href="{{userCtrl.userUrl}}">{{userCtrl.processedUsername}}</a>
                    </td>
                    <td>
                      here's some stuff
                    </td>
                  </tr>

                </tbody>
              </table>
            </div>

          </div>

        </div>
      </div> <!-- /results -->

      <div id="loader" ng-show="userCtrl.processing"  class="tetrominos">
        <div class="tetromino box1"></div>
        <div class="tetromino box2"></div>
        <div class="tetromino box3"></div>
        <div class="tetromino box4"></div>
      </div>

    </div> <!-- /container -->

  </body>
</html>
